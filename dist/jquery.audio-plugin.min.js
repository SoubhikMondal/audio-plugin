!function(s){"use strict";function t(){var s=this;return this.each(function(){this.instance||(this.instance=new i(s.selector))})}var i=function(t){this.$el=s(t),this.playPause=s(t+" .playPause"),this.muteUnmute=s(t+" .muteUnmute"),this.scrobbler=s(t+" .scrobbler"),this.volume=s(t+" .volume"),this.audioURL=s(t).data("audiourl"),this.song=new Audio(this.audioURL),this.song.type="audio/mpeg",this.song.src=this.audioURL,this.isMuted=!1,this.isPlaying=!1,this.previousVolume=10,s(this.scrobbler).attr("max",this.song.duration),this.playPause.addClass("isPaused"),this.muteUnmute.addClass("isUnmuted"),this.volume.val(this.previousVolume),this.addEvents()};i.prototype.addEvents=function(){this.playPause.on("click",s.proxy(this.togglePlayback,this)),this.muteUnmute.on("click",s.proxy(this.toggleVolume,this)),this.volume.on("change",s.proxy(this.updateVolume,this)),this.scrobbler.on("change",s.proxy(this.updateSongPosition,this)),this.song.addEventListener("timeupdate",s.proxy(this.updateScrobbler,this))},i.prototype.updateSongPosition=function(){this.song.currentTime=s(this.scrobbler).val()},i.prototype.updateScrobbler=function(){var t=parseInt(this.song.currentTime,10);s(this.scrobbler).val(t)},i.prototype.togglePlayback=function(){this.isPlaying===!1?(s(this.playPause).removeClass("isPaused").addClass("isPlaying"),this.song.play(),this.isPlaying=!0):(s(this.playPause).removeClass("isPlaying").addClass("isPaused"),this.song.pause(),this.isPlaying=!1)},i.prototype.toggleVolume=function(){this.isMuted?(this.isMuted=!1,s(this.volume).val(this.previousVolume),s(this.muteUnmute).removeClass("isMuted").addClass("isUnmuted")):(this.isMuted=!0,s(this.volume).val(0),s(this.muteUnmute).removeClass("isUnmuted").addClass("isMuted"))},i.prototype.updateVolume=function(){var t=s(this.volume).val();this.song.volume=.1*t,0===t?s(this.muteUnmute).addClass("isMuted"):(this.previousVolume=t,s(this.muteUnmute).addClass("isUnmuted"))},s.fn.mheAudio=t,s.fn.mheAudio.Constructor=i}(jQuery);